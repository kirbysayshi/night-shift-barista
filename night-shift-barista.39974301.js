parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function o(a){return a&&a.__esModule?{d:a.default}:{d:a}}var e={};function La(t,e){var r=this,u=e,n=[];this.getState=function(){return u},this.dispatch=function(e){return"function"==typeof e?e(r.dispatch,r.getState):(u=t(u,e),n.forEach(function(t){return t()}),e)},this.subscribe=function(t){return n.push(t),function(){n=n.filter(function(e){return e!==t})}},this.dispatch({type:"@@INIT"})}Object.defineProperty(e,"__esModule",{value:!0});var _=La;e.Store=_;var Ia=function(e,t,a,o){var l=e.getContext("2d");e.style.margin="0 auto",e.style.display="block";var n="BODY"!==e.parentNode.nodeName?e.parentNode:null;n&&(n.style.margin="0 auto",n.style.display="block"),t<a?(e.style.height="100%",n&&(n.style.height="100%")):(e.style.width="100%",n&&(n.style.width="100%")),t*=o,a*=o,e.width=t,e.height=a,l.webkitImageSmoothingEnabled=!1,l.msImageSmoothingEnabled=!1,l.mozImageSmoothingEnabled=!1,l.imageSmoothingEnabled=!1;var i={width:t,height:a,cvs:e,ctx:l,scale:o,destroy:function(){Object.keys(i).map(function(e){return delete i[e]})}};return i};var r=function(e){return new Promise(function(r,n){var o=new Image;o.onload=function(){return r(o)},o.onerror=n,o.src=e})};var ua=function(n){var o=n.drawTime,t=n.updateTime,r=n.draw,i=n.update,e=n.panicAt,a=void 0===e?10:e,d=n.onPanic,u=void 0===d?function(){}:d,f=n.onFPS,c=void 0===f?function(){}:f,$=window.performance,p=o,w=t,v=$.now.bind($),l=window.requestAnimationFrame.bind(window),m=0,g=null,s=v(),x=v(),G=0,A=0;!function n(o){g=l(n);var t=o-s;s=o;var e=(m+=t)-p>=0,d=Math.floor(m/w);if(d>=a)return m=0,s=v(),void u();for(;d-->0;)m-=w,i(w);e&&r(m/p),G+=1,x+1e3<=o&&(A=.25*G+.75*A,G=0,x=o,c(A))}(v());return{stop:function(){g&&cancelAnimationFrame(g)}}};function Fa(t,e,n,r,a,u,o,l,v){v=v||5;var f=null,h=!1,i=[];t.addEventListener("touchstart",c,!1),t.addEventListener("touchmove",c,!1),t.addEventListener("touchcancel",y,!1),t.addEventListener("touchend",function(t){t.preventDefault();var e=function(t,e){var n=e[0].x,r=e[0].y;t.x=0,t.y=0;for(var a=0;a<e.length;a++)t.x+=e[a].x-n,t.y+=e[a].y-r;return t.x=t.x/e.length,t.y=t.y/e.length,t}({x:0,y:0},i);if(h)return y(),l();if(1===i.length||function(t){for(var e=t[0].x,n=t[0].y,r=0,a=0,u=0;u<t.length;u++)r-=t[u].x-e,a-=t[u].y-n;return Math.sqrt(r*r+a*a)}(i)<v)return y(),u();var n=[d(e.x,e.y,0,-1),d(e.x,e.y,1,0),d(e.x,e.y,0,1),d(e.x,e.y,-1,0)],r=Math.max.apply(null,n),a=n.indexOf(r);x[a](),y()},!1);var x=[e,n,r,a];function c(t){t.preventDefault(),t.stopPropagation();for(var e=t.changedTouches,n=0;n<e.length;n++){var r=e[n];i.push({x:r.pageX,y:r.pageY})}!function(){f&&clearTimeout(f);f=setTimeout(function(){h||(h=!0,o())},200)}()}function y(t){i.length=0,h=!1,clearTimeout(f),f=null}function d(t,e,n,r){return t*n+e*r}}function a($,e,T){return e in $?Object.defineProperty($,e,{value:T,enumerable:!0,configurable:!0,writable:!0}):$[e]=T,$}function ea($,e,T){var r,t=(a(r={},K,{x:0,y:60,w:12,h:12}),a(r,M,{x:0,y:48,w:12,h:12}),a(r,Q,{x:0,y:36,w:12,h:12}),a(r,H,{x:0,y:84,w:12,h:12}),a(r,h,{x:0,y:108,w:12,h:12}),a(r,v,{x:0,y:120,w:12,h:12}),a(r,D,{x:0,y:132,w:12,h:12}),a(r,g,{x:0,y:144,w:12,h:12}),a(r,k,{x:0,y:168,w:12,h:12}),a(r,q,{x:0,y:156,w:12,h:12}),a(r,ba,{x:0,y:0,w:12,h:12}),a(r,A,{x:0,y:96,w:12,h:12}),a(r,O,{x:0,y:180,w:12,h:12}),a(r,Ba,{x:0,y:1188,w:12,h:12}),a(r,aa,{x:0,y:72,w:12,h:12}),a(r,R,{x:0,y:12,w:12,h:12}),a(r,W,{x:0,y:24,w:12,h:12}),a(r,V,{x:0,y:240,w:12,h:12}),a(r,s,{x:0,y:228,w:12,h:12}),a(r,X,{x:0,y:216,w:12,h:12}),a(r,E,{x:0,y:192,w:12,h:12}),a(r,C,{x:0,y:204,w:12,h:12}),r),i={"0,0-2,8":V,"3,0-8,9":s,"0,9-15,15":s,"8,0-8,1":E,"8,4":C,"8,6":C,"8,8":C,"8,10":C,"0,9-2,9":X},d=Ea(T,255,0,0,255),o={debug:!1,view:"BOOT_GAME_VIEW",SPRITE_SIZE:12,SPRITE_COLS:9,SPRITE_ROWS:16,screen:Ia($,108,192,2),tileImage:e,tileSet:t,tileMap:i,fontImage:T,fontImageWhite:T,fontImageBlack:d,fontChrWidths:{2:"ilI!.':,",3:"t1",4:"abcdefghjknopqrsuvxyzL?-",5:"ABCDEFGHJKNOPRSUZ023456789& \u2588",6:"mwMQTVWXY\u25CB\u2717\u2764\u2605\u266A"},fontChrOrder:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!?&.'-\u25CB\u2717\u2764\u2605\u266A:\u2588,",rng:ta(sa()),customers:[],orders:[],money:0,reputation:0,totalCustomersServed:0,rareCustomers:[],levelTime:0,levelMaxTime:10*B*100,sun:{position:{start:0,end:0},height:{start:0,end:0},distance:{start:0,end:0}},levelIdx:0,lastCustomerSpawnDT:0,customerNames:["Benjamin","Kira","Julian","Miles","Jadzia","Keiko","Kasidy","Jake","Worf"].map(function($){return{name:$,hasSpawned:!1}}),levels:[{wants:[{type:g,rarity:0,minimumTime:10*B*10}]},{wants:[{type:Z,rarity:.3,minimumTime:10*B*10,name:"El Hombre de Leche",hasSpawnedOnce:!1},{type:v,rarity:.2,minimumTime:10*B*10},{type:g,rarity:0,minimumTime:10*B*10}]},{wants:[{type:v,rarity:.5,minimumTime:10*B*10},{type:D,rarity:.3,minimumTime:10*B*10},{type:g,rarity:.1,minimumTime:10*B*10}]}],log:[],hasLoggedElapsedForPct:{},stations:{offset:{cols:2,rows:n},entries:[{type:ba,name:"The Register"},{type:R,name:"Counter",has:[]},{type:W,name:"Cup Counter"},{type:Q,name:"Hot Water",has:[],timer:{value:0,max:10,hold:!0,active:!1,green:1,red:1}},{type:M,name:"Grouphead",has:[{type:k}],timer:{value:0,max:30,hold:!1,active:!1,green:.55,red:.95}},{type:K,name:"Milk Steamer",has:[],timer:{value:0,max:30,hold:!0,active:!1,green:.55,red:.95}},{type:aa,name:"Trash / Grounds Chute"},{type:H,name:"Grinder",setting:20,has:[],timer:{value:0,max:10,hold:!0,active:!1,green:1,red:1}},{type:A,name:"The Counter",has:[]}]},player:{isActivating:!1,position:{cols:0,rows:0},offset:{cols:0,rows:n},field:{cols:1,rows:8},has:[]}};return o.sun.position.start=4*o.screen.height,o.sun.position.end=o.screen.height/3,o.sun.distance.start=o.sun.distance.end=o.screen.width/2,o.sun.height.start=o.screen.height/2,o.sun.height.end=3*o.screen.height,o}function sa(){var t=35208;return function(){return t=((t>>1&1^t>>9&1)<<15|t>>>1)>>>0}}function ta(t){return function(){return(t()-2)/65532}}sa,ta;function Ea(t,e,a,r,d){var h=document.createElement("canvas");h.width=t.width,h.height=t.height;var $=h.getContext("2d");$.drawImage(t,0,0);for(var g=$.getImageData(0,0,h.width,h.height),n=g.data,o=0;o<n.length;o+=4)n[o+0]=e,n[o+1]=a,n[o+2]=r,n[o+3]=0!==n[o+3]?d:0;return $.putImageData(g,0,0),h}var Da=1e3/60;var B=100;var ga="GAME_TICK";var U="SWIPE_UP";var S="SWIPE_DOWN";var ja="ACTIVATE";var J="ACTIVATE_CEASE";var ka="NEW_CUSTOMER";var la="DEBUG_TOGGLE";var j="LOG_ENTRY_ADDED";var ca="NEXT_LEVEL";var pa="CUSTOMER_DRINK_READY";var ba="ORDER_COUNTER";var K="STEAMER";var M="GROUPHEAD";var H="GRINDER";var Q="HOT_WATER";var aa="TRASH";var R="EMPTY_COUNTER";var A="PICKUP_COUNTER";var W="CUP_COUNTER";var V="COUNTER_FLOOR";var s="SHOP_FLOOR";var X="DECORATIVE_PLANT";var E="SHOP_DOOR";var C="SHOP_WINDOW";var h="CLEAN_CUP";var v="FILLED_AMERICANO_CUP";var D="FILLED_CAPPUCCINO_CUP";var g="FILLED_ESPRESSO_CUP";var k="CLEAN_PORTAFILTER";var q="FILLED_PORTAFILTER";var Z="FILLED_STEAMED_MILK_CUP";var F="FILLED_HOT_WATER_CUP";var O="BARISTA";var Ba="CHECKMARK";var d=.5;var n=0;var fa=10;var m="FONT_COLOR_WHITE";var da="BOOT_GAME_VIEW";var N="BETWEEN_LEVEL_VIEW";var ha="SHOW_SUMMARY_VIEW";var G="LEVEL_VIEW";var ia="SUMMARY_VIEW";ea;function Y(t){t.player;var r=t.player.position;return t.stations.entries[r.rows]}var za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function w(t,e,r){var $=e.has.findIndex(function(t){return t.type===r});if(-1!==$){var o=e.has.splice($,1);t.has.push(o[0]),t.has.sort(p)}}function x(t,e,r){var $={type:e,sprite:r||e};return t.has.push($),t.has.sort(p),$}function b(t,e){return t.has.find(function(t){return t.type===e})}function u(t,e){var r=t.has.findIndex(function(t){return t.type===e});if(-1!==r)return t.has.splice(r,1)[0]}function ma(t){t.has.length=0}function z(t){return t.has[0].type}function na(t,e){for(var r=function(r){if(t.has.find(function(t){return t.type===e[r]}))return{v:e[r]}},$=0;$<e.length;$++){var o=r($);if("object"===(void 0===o?"undefined":za(o)))return o.v}return!1}function p(t,e){return t.type===k||t.type===q?1:e.type===k||e.type===q?-1:0}w,x,b,u,ma,z,na,p;var wa=function(){return function($,t){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return function($,t){var e=[],r=!0,i=!1,m=void 0;try{for(var p,R=$[Symbol.iterator]();!(r=(p=R.next()).done)&&(e.push(p.value),!t||e.length!==t);r=!0);}catch($){i=!0,m=$}finally{try{!r&&R.return&&R.return()}finally{if(i)throw m}}return e}($,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function Ga($,t){if(t.type===N)return $.view=N,$;if(t.type===ca){var e=ea($.screen.cvs,$.tileImage,$.fontImage);return e.money=$.money,e.reputation=$.reputation,e.totalCustomersServed=$.totalCustomersServed,e.levelIdx=$.view===da?0:$.levelIdx+1,e.view=G,e}if(t.type===ha)return $.view=ia,$.customers.forEach(function(t){!0===t.paid&&($.reputation-=fa)}),$;if(t.type===la)return $.debug=!$.debug,$;if(t.type===J)return $.player.isActivating=!1,$;if(t.type===ka){$.SPRITE_COLS;var r={name:t.data.name,wants:t.data.wants,rare:t.data.rare,paid:!1,position:{rows:0,cols:0}};return $.customers.push(r),qa($),$}if(t.type===U)return($.player.position.rows-=1)<0&&($.player.position.rows=0),$;if(t.type===S)return($.player.position.rows+=1)>=$.player.field.rows&&($.player.position.rows=$.player.field.rows),$;if(t.type===j){var i=$.log;for(i.push(t.data);i.length>5;)i.shift();return $}if(t.type===ga&&$.view===G){$.levelTime+=B,$.rng();for(var m=$.player,p=$.stations,R=Y($),o=0;o<p.entries.length;o++){var d=p.entries[o];if(d.timer){if(d.timer.active&&d.timer.value/d.timer.max>=d.timer.green){if(d.type===M&&b(d,h)&&(u(d,h),x(d,g)),d.type===M&&b(d,F)&&(u(d,F),x(d,v)),d.type===Q&&b(d,g)){var V=u(d,g);x(d,v).wellBrewed=V.wellBrewed}if(d.type===Q&&b(d,h)){var a=u(d,h);x(d,F,h).wellBrewed=a.wellBrewed}if(d.type===K&&b(d,g)){var X=u(d,g);x(d,D).wellBrewed=X.wellBrewed}if(d.type===K&&b(d,h)){var E=u(d,h);x(d,Z,D).wellBrewed=E.wellBrewed}}if(d.timer.active&&d.timer.value>=d.timer.max&&(d.timer.active=!1,d.type===H))return ma(d),x(d,q),$;d.timer.hold&&d.timer.active&&R===d&&m.isActivating&&(d.timer.value+=1),!d.timer.hold&&d.timer.active&&(d.timer.value+=1)}}return $}if(t.type===ja){var I=$.player,T=Y($);if(T.type===Q){if((b(I,g)||b(I,h))&&0===T.has.length)return w(T,I,z(I)),$;if(1===T.has.length&&(b(T,g)||b(T,h)))return T.timer.active=!0,I.isActivating=!0,$;if(T.has.length&&!1===T.timer.active)return w(I,T,z(T)),T.timer.value=0,$}if(T.type===M){if(b(T,q)&&(b(T,h)||b(T,F)))return T.timer.active=!0,I.isActivating=!0,$;if(b(T,q)&&!0===T.timer.active)return T.timer.active=!1,I.isActivating=!0,$;if(0===I.has.length&&b(T,q)&&(b(T,g)||b(T,v))){var f=na(T,[g,v]);w(I,T,f);var L=T.timer.value/T.timer.max;return I.has[0].wellBrewed=L<=T.timer.red,u(T,q),x(T,k),T.timer.value=0,$}if(b(T,k)&&0===I.has.length)return w(I,T,k),$;if((b(I,k)||b(I,q))&&!b(T,k)&&!b(T,q))return w(T,I,z(I)),$;if((b(I,h)||b(I,F))&&!b(T,h)&&!b(T,v)&&!b(T,g)&&!b(T,D)&&!b(T,F))return w(T,I,z(I)),$}if(T.type===W){if(0===I.has.length)return x(I,h),$;if(b(I,h))return u(I,h),$}if(T.type===ba){for(var O=0;O<$.customers.length;O++){var s=$.customers[O];if(!s.paid){$.money+=5,s.paid=!0;break}}return $}if(T.type===H&&b(T,k))return I.isActivating=!0,T.timer.active=!0,$;if(T.type===H&&b(T,q)&&!I.isActivating)return w(I,T,q),T.timer.value=0,$;if(T.type===H&&b(I,k))return w(T,I,k),$;if(T.type===aa){if(b(I,q))return u(I,q),x(I,k),$;if(I.has.length&&!b(I,k))return u(I,z(I)),$}if(T.type===K){if(0===T.has.length&&(b(I,g)||b(I,v)||b(I,h)))return w(T,I,z(I)),$;if(b(T,g)||b(T,v)||b(T,h))return I.isActivating=!0,T.timer.active=!0,$;if(0!==T.has.length&&0===I.has.length&&!I.isActivating)return w(I,T,z(T)),T.timer.value=0,$}}if(t.type===pa){var _=$.player;if(b(_,g)||b(_,D)||b(_,v)||b(_,Z)||b(_,F)){var y=z(_),n=u(_,y),A=$.customers,C=t.data;n.wellBrewed&&($.reputation+=fa),$.totalCustomersServed+=1;var P=A.splice(C,1),l=wa(P,1)[0];qa($),l&&l.rare&&$.rareCustomers.push(l)}}return $}function qa($){var t=$.customers,e=$.SPRITE_COLS;t.forEach(function($,t){$.position={rows:.5+t,cols:Math.floor(e/2)}})}function ra(r,e){for(var o=e.player,$=o.offset,t=o.position,a=t.cols,n=t.rows,l=$.cols+a,p=$.rows+n,s=0;s<o.has.length;s++){var x=o.has[s];y(e,x.sprite||x.type,l+.5,p)}y(e,O,l,p)}var y=function(t,e,$,a){var r=t.SPRITE_SIZE,l=t.screen,x=t.tileSet,h=t.tileImage,o=l.scale,c=x[e];l.ctx.drawImage(h,c.x,c.y,c.w,c.h,$*r*o,a*r*o,r*o,r*o)};ra;function i(r,e){var o=e.stations,t=o.offset,a=o.entries,$=t.cols,p=t.rows;a.forEach(function(r,o){var t=p;if(y(e,r.type,$,t),r.has)for(var a=0;a<r.has.length;a++){var i=r.has[a];y(e,i.sprite||i.type,$-1,t)}r.timer&&r.timer.value>0&&va(e,r.timer.value,r.timer.max,$,t,r.timer.green,r.timer.red),p+=1})}var va=function(e,t,c,r,$,a,l){var f=e.SPRITE_SIZE,v=e.screen,x=v.scale,I=f*x,o=I/3,p=I-o,s=t/c,u=s*I,U=s<a?"rgba(255,255,255,0.8)":s>=a&&s<=l?"rgba(0,255,0,0.8)":"rgba(255,0,0,0.8)";v.ctx.fillStyle=U,v.ctx.fillRect(r*f*x,$*f*x+p,u,o)};i;function c(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,$=t.SPRITE_SIZE,i=t.fontChrWidths,f=t.fontChrOrder,c=t.fontImageWhite,h=t.fontImageBlack,l=t.screen,s=l.scale,u=o===m?c:h,p=Object.keys(i).reduce(function(t,e){return i[e].split("").forEach(function(r){return t[r]=parseInt(e,10)}),t},{}),d=$*s*r,F=$*s*n;e.split("").forEach(function(t){for(var e=0,r=0;r<f.length;r++){var n=f[r];if(t===n)break;e+=p[n]}" "!==t&&l.ctx.drawImage(u,e,0,p[t],u.height,d,F,p[t]*a,u.height*a),d+=p[t]*a})}c;function oa($,r){var t=r.customers,e=r.SPRITE_COLS;c(r,"CUSTOMERS",Math.floor(e/2),.5+n),t.forEach(function($,t){var e=$.wants,o=(e.type,e.name),a=$.position,p=a.cols,i=a.rows;c(r,($.paid?"":"\u2588 ")+$.name+": "+o,p,.5+i+n)})}oa;function xa(e,$){var r=$.SPRITE_ROWS;c($,"\u2588 "+$.money,d,r-1+.5),c($,"\u2764 "+$.reputation,d,r-2+.5);var t=$.levelMaxTime-$.levelTime,o=Math.floor(t/6e4),a=Math.floor((t-6e4*o)/1e3);a=a<10?"0"+a:a,c($,o+":"+a,d,r-3+.5)}xa;var ya=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var t=[],a=!0,n=!1,l=void 0;try{for(var o,i=r[Symbol.iterator]();!(a=(o=i.next()).done)&&(t.push(o.value),!e||t.length!==e);a=!0);}catch(r){n=!0,l=r}finally{try{!a&&i.return&&i.return()}finally{if(n)throw l}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function l(r,e){e.stations,e.screen,e.tileSet;for(var t=e.tileMap,a=(e.SPRITE_COLS,e.SPRITE_ROWS,Object.keys(t)),n=0;n<a.length;n++){var l=a[n],o=l;-1===l.indexOf("-")&&(l=l+"-"+l);var i=/(\d+),(\d+)-(\d+),(\d+)/g.exec(l),$=ya(i,5),u=$[1],c=$[2],d=$[3],s=$[4];u=parseInt(u,10),c=parseInt(c,10),d=parseInt(d,10),s=parseInt(s,10);for(var f=u;f<=d;f++)for(var p=c;p<=s;p++)y(e,t[o],f,p)}}function Aa(p,e,$,o){return 0==p?e:$*Math.pow(2,10*(p/o-1))+e}var P=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,a=!1,n=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function Ca(e,t){var r=t.SPRITE_COLS,i=t.SPRITE_ROWS,a=t.tileMap,n=t.sun,o=t.screen,l=Aa(t.levelTime,0,t.levelMaxTime,t.levelMaxTime)/t.levelMaxTime,s=-1*n.distance.start,$=n.position.start+(n.position.end-n.position.start)*l,c=(n.height.start+(n.height.end-n.height.start)*l)/2,p=Object.keys(a).filter(function(e){return a[e]===C||a[e]===E}),u=/(\d+),(\d+)/,x=o.width/r,v=o.height/i;o.ctx.save(),o.ctx.globalCompositeOperation="lighter";for(var f=0;f<p.length;f++){var h=p[f];if(h.indexOf("-")>-1){var d=h.split("-"),A=P(d,2)[1];p.push(A)}var y=u.exec(h),T=P(y,3),m=T[1],Y=T[2];m=parseInt(m,10),Y=parseInt(Y,10),o.ctx.fillStyle="rgba(255, 255, 255, "+.1*l+")",o.ctx.beginPath(),o.ctx.moveTo((m+1)*x,Y*v),o.ctx.lineTo(s,$-c),o.ctx.lineTo(s,$+c),o.ctx.lineTo((m+1)*x,(Y+1)*v),o.ctx.fill()}o.ctx.restore()}function L(t,r){var e=r.screen;r.tileSet,r.tileMap,r.SPRITE_COLS,r.SPRITE_ROWS;e.ctx.fillStyle="rgba(0,0,0,0.7)",e.ctx.fillRect(0,0,e.width,e.height);c(r,"Night-Shift",1,2,m,3),c(r,"Barista",1,3,m,3);var $=6.5;c(r,"You are the sole barista at a 24-hour coffee",1,$+=.5),c(r,"shop. Serve your customers the glitching brew",1,$+=.5),c(r,"their sleepless brains require, while waiting",1,$+=.5),c(r,"for the safety of the sun.",1,$+=.5);var i=10;c(r,"CONTROLS:",1,i+=.5),c(r,"UP: Move up",1,i+=.5),c(r,"DOWN: Move down",1,i+=.5),c(r,"RIGHT: Activate - Pick up - Put down",1,i+=.5);c(r,"Programming & Design: Drew Petersen",1,14,m,1),c(r,"Sprites: Lisa Leung",1,14.5,m,1),c(r,"A 2016 JS13k Competition Entry",1,15,m,1)}L;function I($,p){var r=p.log,t=10;c(p,"THOUGHTS",d,t),r.forEach(function($,r){c(p,$,d,t+=.5)})}I;function $(t,$){var e=$.screen;$.tileSet,$.tileMap,$.SPRITE_COLS,$.SPRITE_ROWS;e.ctx.fillStyle="rgba(0,0,0,0.7)",e.ctx.fillRect(0,0,e.width,e.height);c($,"Weekly",1,2,m,2),c($,"Night-Shifts:",1,3,m,2),c($,"Complete!",1,4,m,2);var r=4.5;c($,"\u2764: "+$.reputation,1,r+=.5),c($,"\u2588: "+$.money,1,r+=.5),c($,"Customers: "+$.totalCustomersServed,1,r+=.5);c($,"Thank you for playing!",1,r+=.5,m,1)}$;function T(e,t){var $=t.screen,r=(t.tileSet,t.tileMap,t.SPRITE_COLS,t.SPRITE_ROWS,t.rareCustomers);$.ctx.fillStyle="rgba(0,0,0,0.7)",$.ctx.fillRect(0,0,$.width,$.height);c(t,"Shift Complete!",1,2,m,2);var a=4;r.length&&(c(t,"Interesting people:",1,a),r.forEach(function(e){c(t,e.name,1,a+=.5)})),a++,c(t,"The next night",1,++a,m,2),c(t,"... Begins!",1,++a,m,2)}T;var Ha=function(){return function(t,e){var a=e();if(a.view===G&&a.levelTime>=a.levelMaxTime)return a.levelIdx+1<a.levels.length?t({type:N}):t({type:ha})}};var f=function(){return function(t,e){var a=e();if(a.view===G){var o=Y(a),r=a.player;if(r.has.length&&o.type===A){var i=z(r),$=a.customers,d=$.findIndex(function(t){return t.wants.type===i});if(d>-1)return $[d].paid?t({type:pa,data:d}):t({type:j,data:"They need to pay to receive the drink!"})}if(!a.player.isActivating)return t({type:ja})}return a.view===da?t({type:ca}):a.view===N?t({type:ca}):void 0}};var Ja=function(){return function(t,e){var a=e(),o=(a.levelTime/a.levelMaxTime).toPrecision(2);if(!a.hasLoggedElapsedForPct[o])return"0.25"===o?(t({type:j,data:"Phew, a quarter through my shift!"}),void(a.hasLoggedElapsedForPct[o]=!0)):"0.5"===o?(t({type:j,data:"Halfway through my shift!"}),void(a.hasLoggedElapsedForPct[o]=!0)):"0.75"===o?(t({type:j,data:"Just a quarter of my shift left!"}),void(a.hasLoggedElapsedForPct[o]=!0)):"0.91"===o?(t({type:j,data:"I think I can see daylight!"}),void(a.hasLoggedElapsedForPct[o]=!0)):"0.92"===o?(t({type:j,data:"What is 'daylight'?"}),void(a.hasLoggedElapsedForPct[o]=!0)):"0.93"===o?(t({type:j,data:"I remember now!"}),void(a.hasLoggedElapsedForPct[o]=!0)):"0.94"===o?(t({type:j,data:"Daylight is definitely approaching!"}),void(a.hasLoggedElapsedForPct[o]=!0)):"0.95"===o?(t({type:j,data:"It's getting so bright!"}),void(a.hasLoggedElapsedForPct[o]=!0)):"0.96"===o?(t({type:j,data:"So bright..."}),void(a.hasLoggedElapsedForPct[o]=!0)):"0.97"===o?(t({type:j,data:"So sleepy..."}),void(a.hasLoggedElapsedForPct[o]=!0)):"0.98"===o?(t({type:j,data:"I can almost smell my bed..."}),void(a.hasLoggedElapsedForPct[o]=!0)):"0.99"===o?(t({type:j,data:"Almost time to close up!"}),void(a.hasLoggedElapsedForPct[o]=!0)):"1"===o?(t({type:j,data:"Everybody out!"}),void(a.hasLoggedElapsedForPct[o]=!0)):void 0}};var Ka=function(){return function(t,e){var a=e();if(a.view===G){var o=a.lastCustomerSpawnDT,r=a.levelTime,i=a.rng,$=a.customerNames,d=(a.customers,a.levels[a.levelIdx]),p=!1;d.wants.forEach(function(e){if(!p&&!e.hasSpawnedOnce&&(0===o&&r>=0||r-o>e.minimumTime)&&i()>e.rarity){var d=void 0,n=!1;if(e.name)d=e.name,e.hasSpawnedOnce=!0,n=!0;else{var E=$.filter(function(t){return!1===t.hasSpawned});E.length||($.forEach(function(t){return t.hasSpawned=!1}),E=$);var s=E[Math.floor(i()*(E.length-1))];s.hasSpawned=!0,d=s.name}t({type:ka,data:{name:d,rare:n,wants:{type:e.type,name:e.type===v?"Americano":e.type===g?"Espresso":e.type===D?"Cappuccino":"??????"}}}),t({type:j,data:"A new customer walked in!"}),0===a.lastCustomerSpawnDT&&t({type:j,data:"... I'd better take their money \u2588."}),p=!0,a.lastCustomerSpawnDT=r}})}}};var t={};var Ma={};Ma="m05-short.24201d0a.png";var Na={};Na="tiles.0455bd64.png";t={"m05-short":Ma,tiles:Na};var Oa=function(){return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,o){var e=[],r=!0,i=!1,c=void 0;try{for(var $,a=t[Symbol.iterator]();!(r=($=a.next()).done)&&(e.push($.value),!o||e.length!==o);r=!0);}catch(t){i=!0,c=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw c}}return e}(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function Pa(){var $HBCd$$interop$default=o(t);Promise.all([r($HBCd$$interop$default.d.tiles),r($HBCd$$interop$default.d["m05-short"])]).then(function(t){var o=Oa(t,2),e=o[0],r=o[1],i=new _(Ga,ea(window.c,e,r));i.subscribe(function(){var t=i.getState();if(t.debug){var o=window.d;o||((o=document.createElement("pre")).id="d",o.style="display:block;position:absolute;color:white;overflow:scroll;z-index:9000;height:100%;width:100%;top:0;left:0",document.body.appendChild(o)),o.innerHTML=JSON.stringify(i.getState(),null,"  ")}Qa(1,t)});var c=ua({drawTime:Da,updateTime:B,draw:function(t){},update:function(t){i.dispatch({type:ga,data:t}),i.dispatch(Ha()),i.dispatch(Ka()),i.dispatch(Ja())}});document.body.addEventListener("keydown",function(t){27===t.which&&(c.stop(),console.log("halt in the name of science")),[37,38,39,40].indexOf(t.which)>-1&&t.preventDefault(),38===t.which&&i.dispatch({type:U}),40===t.which&&i.dispatch({type:S}),39===t.which&&i.dispatch(f()),188===t.which&&t.metaKey&&t.shiftKey&&i.dispatch({type:la})},!1),document.body.addEventListener("keyup",function(t){39===t.which&&i.dispatch({type:J})},!1),"ontouchstart"in window&&(window.ipt.style.display="block",window.btnup.addEventListener("touchend",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),i.dispatch({type:U})},!1),window.btndown.addEventListener("touchend",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),i.dispatch({type:S})},!1),window.btnact.addEventListener("touchstart",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),i.dispatch(f())},!1),window.btnact.addEventListener("touchend",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),i.dispatch({type:J})},!1),document.body.addEventListener("touchstart",function(t){return t.preventDefault()}),Fa(document,function(){i.dispatch({type:U})},function(){i.dispatch(f()),i.dispatch({type:J})},function(){i.dispatch({type:S})},function(){},function(){i.dispatch(f()),i.dispatch({type:J})},function(){i.dispatch(f())},function(){i.dispatch({type:J})}))})}function Qa(t,o){var e=o.screen,r=o.view;e.ctx.clearRect(0,0,e.width,e.height),r===G&&(l(t,o),ra(t,o),i(t,o),oa(t,o),I(t,o),Ca(t,o)),r===N&&(l(t,o),i(t,o),T(t,o)),r===da&&(l(t,o),i(t,o),L(t,o)),r===ia&&(l(t,o),i(t,o),$(t,o))}var Ra=o(t);console.log(Ra.d),Pa();return{"Focm":{}};});